<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Admin â€¢ Hostel Allocation</title>
	<link rel="stylesheet" href="styles.css">
	<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body class="user-admin">
	<div class="container">
		<header class="header">
            <div class="logo"><img src="assets/astra_logo.png" alt="Astra" style="height:40px;transform:scale(2.35);"></div>
			<nav class="header-nav"><ul class="nav-menu">
				<li class="nav-item" data-target-url="admin.html"><i class="fas fa-tachometer-alt"></i><span>Dashboard</span></li>
				<li class="nav-item" data-target-url="admin_users.html"><i class="fas fa-users-cog"></i><span>User Management</span></li>
				<li class="nav-item" data-target-url="admin_students.html"><i class="fas fa-user-graduate"></i><span>Students</span></li>
				<li class="nav-item" data-target-url="admin_teachers.html"><i class="fas fa-chalkboard-teacher"></i><span>Teachers</span></li>
				<li class="nav-item" data-target-url="admin_courses.html"><i class="fas fa-book"></i><span>Courses</span></li>
				<li class="nav-item active" data-target-url="admin_hostel.html"><i class="fas fa-building"></i><span>Hostel</span></li>
				<li class="nav-item" data-target-url="admin_system.html"><i class="fas fa-server"></i><span>System</span></li>
				<li class="nav-item" data-target-url="admin_reports.html"><i class="fas fa-chart-bar"></i><span>Reports</span></li>
			</ul></nav>
			<div class="header-user-controls"><div class="header-actions"><button class="header-btn notification-btn"><i class="fas fa-bell"></i><span class="notification-badge">8</span></button><button class="header-btn profile-btn" onclick="openProfileMenu()"><i class="fas fa-user-shield"></i></button><button class="header-btn logout-btn" onclick="logout()" id="logoutButton"><i class="fas fa-sign-out-alt"></i><span class="btn-text">Logout</span></button></div></div>
		</header>

		<main class="main-content">
			<div class="module-header"><h2>Hostel Allocation</h2>
				<div class="admin-actions">
					<button class="btn btn-primary" id="btnAddHostel"><i class="fas fa-plus"></i> Add Hostel</button>
					<button class="btn btn-outline" id="btnAddRoom"><i class="fas fa-door-open"></i> Add Room</button>
					<button class="btn btn-success" id="btnAllocate"><i class="fas fa-user-plus"></i> Allocate</button>
					<button class="btn btn-danger" id="btnRelease"><i class="fas fa-user-minus"></i> Release</button>
				</div>
			</div>

			<!-- Filters -->
			<div class="user-management-stats" style="grid-template-columns: repeat(4, minmax(0,1fr)); gap: 1rem;">
				<div class="user-stat-card">
					<h4>Hostel</h4>
					<select id="filterHostel" class="setting-select"><option value="">All</option></select>
				</div>
				<div class="user-stat-card">
					<h4>Gender</h4>
					<select id="filterGender" class="setting-select"><option value="">Any</option><option>Male</option><option>Female</option></select>
				</div>
				<div class="user-stat-card">
					<h4>Availability</h4>
					<select id="filterAvailability" class="setting-select"><option value="">All</option><option value="available">Has Beds</option><option value="full">Full</option></select>
				</div>
				<div class="user-stat-card">
					<h4>Search</h4>
					<input id="filterQuery" type="text" placeholder="Room no / Student" class="setting-input" />
				</div>
			</div>

			<!-- KPIs -->
			<div class="user-management-stats" style="grid-template-columns: repeat(4, minmax(0,1fr)); gap: 1rem;">
				<div class="user-stat-card">
					<h4>Total Beds</h4>
					<div id="kpiTotalBeds" class="stat-number">0</div>
				</div>
				<div class="user-stat-card">
					<h4>Occupied</h4>
					<div id="kpiOccupied" class="stat-number">0</div>
				</div>
				<div class="user-stat-card">
					<h4>Occupancy %</h4>
					<div id="kpiOccupancy" class="stat-number">0%</div>
				</div>
				<div class="user-stat-card">
					<h4>Gender Ratio</h4>
					<div id="kpiGender" class="stat-number">0:0</div>
				</div>
			</div>

			<div class="admin-overview-grid">
				<div class="admin-section">
					<h3>Hostels</h3>
					<div id="hostelList" class="courses-grid"></div>
				</div>
				<div class="admin-section">
					<h3>Rooms</h3>
					<div id="roomList" class="courses-grid"></div>
				</div>
				<div class="admin-section">
					<h3>Allocations</h3>
					<div class="user-management-table">
						<div class="table-filters" style="justify-content:flex-end; gap: .5rem;">
							<button class="btn btn-outline" id="btnExportCSV"><i class="fas fa-file-export"></i> Export CSV</button>
						</div>
						<table class="data-table">
							<thead><tr><th>Student</th><th>Hostel</th><th>Room</th><th>Bed</th><th>Actions</th></tr></thead>
							<tbody id="allocationTableBody"></tbody>
						</table>
					</div>
				</div>
			</div>
		</main>

		<footer class="footer"><div class="footer-content"><div class="footer-section"><h3>Admin Portal</h3><p>Manage hostel facilities and allocations</p></div></div></footer>
	</div>

	<script src="script.js"></script>
	<script>
		// Simple page navigation
		document.querySelectorAll('.nav-item[data-target-url]').forEach(function(i){i.addEventListener('click',function(){var u=this.getAttribute('data-target-url');if(u){location.href=u;}})});

		document.addEventListener('DOMContentLoaded', function(){
			if (typeof initHostelPage === 'function') { initHostelPage(); }
			var btnCsv = document.getElementById('btnExportCSV');
			if (btnCsv && typeof exportAllocationsCSV === 'function') {
				btnCsv.addEventListener('click', function(){ exportAllocationsCSV(); });
			}
		});
	</script>
</body>
</html>


